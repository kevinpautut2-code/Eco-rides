<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace EmployÃ© - EcoRide</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/design-system.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ±</text></svg>">
</head>
<body>
    <nav class="navbar" id="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">ğŸŒ±</div>
                <span>EcoRide EmployÃ©</span>
            </a>

            <div class="navbar-actions">
                <button class="theme-toggle" id="themeToggle">
                    <div class="theme-toggle-slider">
                        <span id="themeIcon">â˜€ï¸</span>
                    </div>
                </button>

                <button class="btn btn-danger" onclick="window.authManager.logout()">
                    
                    <span>DÃ©connexion</span>
                </button>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 2rem; margin-bottom: 4rem;">
        <div class="card mb-lg" style="background: var(--gradient-dark); color: white;">
            <div class="card-body" style="padding: 2rem;">
                <h1 style="color: white; margin-bottom: 0.5rem;">ğŸ›¡ï¸ Espace EmployÃ©</h1>
                <p style="color: rgba(255,255,255,0.9); margin: 0;">ModÃ©ration et gestion des litiges</p>
            </div>
        </div>

        <!-- Stats Overview -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
            <div class="card">
                <div class="card-body text-center">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ“</div>
                    <div class="stat-value" id="pendingReviews">5</div>
                    <div class="stat-label">Avis en attente</div>
                </div>
            </div>

            <div class="card">
                <div class="card-body text-center">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">âš ï¸</div>
                    <div class="stat-value" id="activeDisputes">3</div>
                    <div class="stat-label">Litiges actifs</div>
                </div>
            </div>

            <div class="card">
                <div class="card-body text-center">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">âœ…</div>
                    <div class="stat-value" id="resolvedToday">12</div>
                    <div class="stat-label">RÃ©solus aujourd'hui</div>
                </div>
            </div>

            <div class="card">
                <div class="card-body text-center">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸš«</div>
                    <div class="stat-value" id="rejectedReviews">2</div>
                    <div class="stat-label">Avis rejetÃ©s</div>
                </div>
            </div>
        </div>

        <!-- Review Moderation -->
        <div class="card mb-lg">
            <div class="card-header">
                <h3 class="card-title">ğŸ“ ModÃ©ration des avis</h3>
            </div>
            <div class="card-body">
                <div id="reviewsList">
                    <!-- Review 1 -->
                    <div class="card mb-md" style="border: 2px solid var(--border-medium);">
                        <div class="card-body">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div>
                                    <h4 style="margin-bottom: 0.5rem;">Avis sur le trajet #1245</h4>
                                    <p style="color: var(--text-tertiary); margin: 0;">Paris â†’ Lyon â€¢ 15 janvier 2025</p>
                                </div>
                                <span class="badge badge-warning">En attente</span>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                                <div>
                                    <p style="margin-bottom: 0.5rem;"><strong>Auteur:</strong> Jean Dupont (@jeandupont)</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>Chauffeur:</strong> Marie Martin (@mariemartin)</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>Note globale:</strong> â­ 5/5</p>
                                </div>
                                <div>
                                    <p style="margin-bottom: 0.5rem;"><strong>PonctualitÃ©:</strong> â­ 5/5</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>Conduite:</strong> â­ 5/5</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>VÃ©hicule:</strong> â­ 5/5</p>
                                </div>
                            </div>

                            <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                <p style="margin: 0;"><strong>Commentaire:</strong></p>
                                <p style="margin: 0.5rem 0 0 0;">"Excellente expÃ©rience ! Marie est trÃ¨s ponctuelle et conduit de maniÃ¨re sÃ©curitaire. Le vÃ©hicule Ã©tait propre et confortable. Je recommande vivement !"</p>
                            </div>

                            <div style="display: flex; gap: 1rem;">
                                <button class="btn btn-success" onclick="moderateReview(1245, 'approve')">
                                    <span>âœ…</span>
                                    <span>Approuver</span>
                                </button>
                                <button class="btn btn-danger" onclick="moderateReview(1245, 'reject')">
                                    <span>âŒ</span>
                                    <span>Rejeter</span>
                                </button>
                                <button class="btn btn-secondary" onclick="flagReview(1245)">
                                    <span>ğŸš©</span>
                                    <span>Signaler</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Review 2 -->
                    <div class="card mb-md" style="border: 2px solid var(--border-medium);">
                        <div class="card-body">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div>
                                    <h4 style="margin-bottom: 0.5rem;">Avis sur le trajet #1246</h4>
                                    <p style="color: var(--text-tertiary); margin: 0;">Marseille â†’ Nice â€¢ 16 janvier 2025</p>
                                </div>
                                <span class="badge badge-warning">En attente</span>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                                <div>
                                    <p style="margin-bottom: 0.5rem;"><strong>Auteur:</strong> Sophie Bernard (@sophieb)</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>Chauffeur:</strong> Pierre Durand (@pierred)</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>Note globale:</strong> â­ 2/5</p>
                                </div>
                                <div>
                                    <p style="margin-bottom: 0.5rem;"><strong>PonctualitÃ©:</strong> â­ 1/5</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>Conduite:</strong> â­ 3/5</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>VÃ©hicule:</strong> â­ 2/5</p>
                                </div>
                            </div>

                            <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                <p style="margin: 0;"><strong>Commentaire:</strong></p>
                                <p style="margin: 0.5rem 0 0 0; color: var(--danger-red);">"Retard de 30 minutes sans prÃ©venir. VÃ©hicule sale. Je ne recommande pas du tout ce chauffeur qui est vraiment incompÃ©tent."</p>
                            </div>

                            <div class="alert alert-warning" style="margin-bottom: 1rem;">
                                âš ï¸ <strong>Attention:</strong> Cet avis contient un langage potentiellement inappropriÃ©
                            </div>

                            <div style="display: flex; gap: 1rem;">
                                <button class="btn btn-success" onclick="moderateReview(1246, 'approve')">
                                    <span>âœ…</span>
                                    <span>Approuver</span>
                                </button>
                                <button class="btn btn-danger" onclick="moderateReview(1246, 'reject')">
                                    <span>âŒ</span>
                                    <span>Rejeter</span>
                                </button>
                                <button class="btn btn-secondary" onclick="flagReview(1246)">
                                    <span>ğŸš©</span>
                                    <span>Signaler</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dispute Management -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">âš–ï¸ Gestion des litiges</h3>
            </div>
            <div class="card-body">
                <div id="disputesList">
                    <!-- Dispute 1 -->
                    <div class="card mb-md" style="border: 2px solid var(--warning-orange);">
                        <div class="card-body">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div>
                                    <h4 style="margin-bottom: 0.5rem;">Litige #D-001 â€¢ Trajet #1247</h4>
                                    <p style="color: var(--text-tertiary); margin: 0;">Ouvert le 16 janvier 2025 Ã  14:30</p>
                                </div>
                                <span class="badge badge-danger">Urgent</span>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                                <div>
                                    <h5 style="margin-bottom: 0.5rem;">ğŸ‘¤ Chauffeur</h5>
                                    <p style="margin-bottom: 0.25rem;"><strong>Pseudo:</strong> @julienmartin</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Email:</strong> julien.martin@email.fr</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Note:</strong> â­ 4.7/5</p>
                                </div>
                                <div>
                                    <h5 style="margin-bottom: 0.5rem;">ğŸ’ Passager</h5>
                                    <p style="margin-bottom: 0.25rem;"><strong>Pseudo:</strong> @luciedubois</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Email:</strong> lucie.dubois@email.fr</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Note:</strong> â­ 4.2/5</p>
                                </div>
                            </div>

                            <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.5rem 0;"><strong>ğŸš— DÃ©tails du trajet:</strong></p>
                                <p style="margin: 0 0 0.5rem 0;">ğŸ“ <strong>DÃ©part:</strong> Toulouse, 5 Place du Capitole</p>
                                <p style="margin: 0 0 0.5rem 0;">ğŸ¯ <strong>ArrivÃ©e:</strong> Bordeaux, Gare Saint-Jean</p>
                                <p style="margin: 0 0 0.5rem 0;">ğŸ“… <strong>Date:</strong> 16 janvier 2025 Ã  10:00</p>
                                <p style="margin: 0;"><strong>ğŸ’° Prix:</strong> 45 crÃ©dits</p>
                            </div>

                            <div style="background: var(--warning-light); padding: 1rem; border-radius: var(--radius-md); border-left: 4px solid var(--warning-orange); margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.5rem 0;"><strong>ğŸš¨ Motif du litige:</strong></p>
                                <p style="margin: 0;"><strong>Passager:</strong> "Le chauffeur n'est jamais venu au point de rendez-vous. J'ai attendu 45 minutes et appelÃ© plusieurs fois sans rÃ©ponse. J'ai dÃ» prendre un autre moyen de transport. Je demande un remboursement complet."</p>
                            </div>

                            <div style="background: var(--info-light); padding: 1rem; border-radius: var(--radius-md); border-left: 4px solid var(--info-blue); margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.5rem 0;"><strong>ğŸ’¬ RÃ©ponse du chauffeur:</strong></p>
                                <p style="margin: 0;">"J'Ã©tais bien au point de rendez-vous indiquÃ© dans l'application. J'ai attendu 20 minutes et envoyÃ© 3 messages sans rÃ©ponse. J'ai dÃ» partir pour respecter l'horaire d'arrivÃ©e. Je pense qu'il y a eu confusion sur le lieu."</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸ“ DÃ©cision et commentaires</label>
                                <textarea class="form-control" rows="3" id="dispute001-decision" placeholder="Expliquez votre dÃ©cision et les actions prises..."></textarea>
                            </div>

                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-success" onclick="resolveDispute('D-001', 'refund-passenger')">
                                    <span>ğŸ’°</span>
                                    <span>Rembourser le passager</span>
                                </button>
                                <button class="btn btn-primary" onclick="resolveDispute('D-001', 'refund-50')">
                                    <span>ğŸ¤</span>
                                    <span>Remboursement partiel (50%)</span>
                                </button>
                                <button class="btn btn-secondary" onclick="resolveDispute('D-001', 'favor-driver')">
                                    
                                    <span>En faveur du chauffeur</span>
                                </button>
                                <button class="btn btn-danger" onclick="escalateDispute('D-001')">
                                    <span>âš ï¸</span>
                                    <span>Escalader au support</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Dispute 2 -->
                    <div class="card mb-md" style="border: 2px solid var(--warning-orange);">
                        <div class="card-body">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div>
                                    <h4 style="margin-bottom: 0.5rem;">Litige #D-002 â€¢ Trajet #1248</h4>
                                    <p style="color: var(--text-tertiary); margin: 0;">Ouvert le 17 janvier 2025 Ã  09:15</p>
                                </div>
                                <span class="badge badge-warning">En cours</span>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                                <div>
                                    <h5 style="margin-bottom: 0.5rem;">ğŸ‘¤ Chauffeur</h5>
                                    <p style="margin-bottom: 0.25rem;"><strong>Pseudo:</strong> @thomasleblanc</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Email:</strong> thomas.leblanc@email.fr</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Note:</strong> â­ 4.9/5</p>
                                </div>
                                <div>
                                    <h5 style="margin-bottom: 0.5rem;">ğŸ’ Passager</h5>
                                    <p style="margin-bottom: 0.25rem;"><strong>Pseudo:</strong> @emilieroy</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Email:</strong> emilie.roy@email.fr</p>
                                    <p style="margin-bottom: 0.25rem;"><strong>Note:</strong> â­ 3.8/5</p>
                                </div>
                            </div>

                            <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.5rem 0;"><strong>ğŸš— DÃ©tails du trajet:</strong></p>
                                <p style="margin: 0 0 0.5rem 0;">ğŸ“ <strong>DÃ©part:</strong> Nantes, Place du Commerce</p>
                                <p style="margin: 0 0 0.5rem 0;">ğŸ¯ <strong>ArrivÃ©e:</strong> Rennes, Gare SNCF</p>
                                <p style="margin: 0 0 0.5rem 0;">ğŸ“… <strong>Date:</strong> 17 janvier 2025 Ã  07:00</p>
                                <p style="margin: 0;"><strong>ğŸ’° Prix:</strong> 30 crÃ©dits</p>
                            </div>

                            <div style="background: var(--warning-light); padding: 1rem; border-radius: var(--radius-md); border-left: 4px solid var(--warning-orange); margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.5rem 0;"><strong>ğŸš¨ Motif du litige:</strong></p>
                                <p style="margin: 0;"><strong>Chauffeur:</strong> "La passagÃ¨re a endommagÃ© le siÃ¨ge arriÃ¨re avec une boisson renversÃ©e. Elle refuse de prendre ses responsabilitÃ©s. Je demande une compensation pour le nettoyage."</p>
                            </div>

                            <div style="background: var(--info-light); padding: 1rem; border-radius: var(--radius-md); border-left: 4px solid var(--info-blue); margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.5rem 0;"><strong>ğŸ’¬ RÃ©ponse du passager:</strong></p>
                                <p style="margin: 0;">"J'ai effectivement renversÃ© un peu de cafÃ©, mais j'ai immÃ©diatement nettoyÃ© avec des mouchoirs. Le siÃ¨ge n'Ã©tait dÃ©jÃ  pas trÃ¨s propre Ã  mon arrivÃ©e. Je trouve la demande excessive."</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ğŸ“ DÃ©cision et commentaires</label>
                                <textarea class="form-control" rows="3" id="dispute002-decision" placeholder="Expliquez votre dÃ©cision et les actions prises..."></textarea>
                            </div>

                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-success" onclick="resolveDispute('D-002', 'compensate-driver')">
                                    <span>ğŸ’°</span>
                                    <span>Compenser le chauffeur</span>
                                </button>
                                <button class="btn btn-primary" onclick="resolveDispute('D-002', 'minor-compensation')">
                                    <span>ğŸ¤</span>
                                    <span>Compensation mineure</span>
                                </button>
                                <button class="btn btn-secondary" onclick="resolveDispute('D-002', 'favor-passenger')">
                                    <span>ğŸ’</span>
                                    <span>En faveur du passager</span>
                                </button>
                                <button class="btn btn-danger" onclick="escalateDispute('D-002')">
                                    <span>âš ï¸</span>
                                    <span>Escalader au support</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-bottom">
                <p>Â© 2025 EcoRide - Tous droits rÃ©servÃ©s</p>
            </div>
        </div>
    </footer>

    <script src="js/theme.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/employee-dashboard.js"></script>
</body>
</html>
